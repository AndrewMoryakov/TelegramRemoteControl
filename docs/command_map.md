# Карта команд и функций (монолит vs Hub‑Agent)

Дата: 2026-01-30 (обновлено)

Легенда колонок:
- **Monolith (src/)** — доступно в Telegram в текущем монолите
- **Agent (hub-agent/)** — есть executor на стороне агента
- **BotService (hub-agent/)** — есть команда/обработчик в Telegram UI новой архитектуры

---

## 1) Управление устройствами

| Функция | Monolith | Agent | BotService | Примечание |
|---|---|---|---|---|
| `/addpc` (pairing code) | ✗ | ✗ | ✓ | Только в новой архитектуре |
| `/pc` / `/devices` (выбор ПК) | ✗ | ✗ | ✓ | Только в новой архитектуре |
| Callback `pc:select:*` | ✗ | ✗ | ✓ | Только в новой архитектуре |
| Callback `pc:list` | ✗ | ✗ | ✓ | Только в новой архитектуре |

---

## 2) Инфо‑команды

| Команда | Monolith | Agent | BotService | Примечание |
|---|---|---|---|---|
| `/status` | ✓ | ✓ | ✓ | Полный путь работает |
| `/uptime` | ✓ | ✓ | ✓ | Полный путь работает |
| `/monitor` | ✓ | ✓ | ✓ | Полный путь работает |
| `/processes` | ✓ | ✓ | ✓ | Structured + список процессов в BotService |
| `/drives` | ✓ | ✓ | ✓ | Полный путь работает |
| `/ip` | ✓ | ✓ | ✓ | Полный путь работает |

---

## 3) Shell‑команды

| Команда | Monolith | Agent | BotService | Примечание |
|---|---|---|---|---|
| `/cmd` | ✓ | ✓ | ✓ | Полный путь работает |
| `/powershell` | ✓ | ✓ | ✓ | Полный путь работает |

---

## 4) Screen / окна

| Команда | Monolith | Agent | BotService | Примечание |
|---|---|---|---|---|
| `/screenshot` | ✓ | ✓ | ✓ | Полный путь работает |
| `/windows` | ✓ | ✓ | ✓ | Полный путь работает |
| Callback `win:*` | ✓ | ✓ | ✓ | Обработчик в BotService |

---

## 5) Сервисы

| Команда | Monolith | Agent | BotService | Примечание |
|---|---|---|---|---|
| `/services` | ✓ | ✓ | ✓ | Полный путь работает |
| Callback `svc:*` | ✓ | ✓ | ✓ | Обработчик в BotService |

---

## 6) Файлы

| Команда | Monolith | Agent | BotService | Примечание |
|---|---|---|---|---|
| `/files` | ✓ | ✓ | ✓ | Файловый менеджер |
| Callback `f:*` | ✓ | ✓ | ✓ | Навигация/preview/download |

---

## 7) Управление питанием/системой

| Команда | Monolith | Agent | BotService | Примечание |
|---|---|---|---|---|
| `/lock` | ✓ | ✓ | ✓ | Полный путь работает |
| `/kill` | ✓ | ✓ | ✓ | Завершение процесса по PID |
| `/restart` | ✓ | ✓ | ✓ | Полный путь работает |
| `/shutdown` | ✓ | ✓ | ✓ | Полный путь работает |
| `/sleep` | ✓ | ✓ | ✓ | Полный путь работает |
| `/hibernate` | ✓ | ✓ | ✓ | Полный путь работает |

---

## 8) Меню и навигация

| Функция | Monolith | Agent | BotService | Примечание |
|---|---|---|---|---|
| Главное меню | ✓ | — | ✓ | Есть MenuBuilder в BotService |
| Категории | ✓ | — | ✓ | Categories перенесены |
| Кнопка «Меню/Назад» | ✓ | — | ✓ | ReplyWithMenu/Back добавлены |
| Подтверждение опасных действий | ✓ | — | ✓ | confirm callbacks |

---

## 9) Уведомления

| Команда | Monolith | Agent | BotService | Примечание |
|---|---|---|---|---|
| `/notify on|off` | ✗ | — | ✓ | Включение push‑уведомлений о статусе |

---

## 10) Доступ

| Команда | Monolith | Agent | BotService | Примечание |
|---|---|---|---|---|
| `/register` | ✗ | — | ✓ | Запрос доступа |
| `/approve <userId>` | ✗ | — | ✓ | Админ‑одобрение |
| `/deny <userId>` | ✗ | — | ✓ | Админ‑запрет |

---

## 11) Итог (кратко)

- **Монолит**: полный функционал, но управляет только одним ПК.
- **Hub‑Agent**: практически все команды перенесены (info/shell/окна/сервисы/файлы/питание), меню и выбор ПК работают.
- Для полного паритета критичных команд уже нет.

